
<style>
.spam_signal__metric {
  font-size: 2rem;
  font-weight: bold;
  font-family: Courrier, monospace;
}
.spam_signal__section {
  margin-top: 2rem;
  margin-bottom: 4rem;
}
.spam_signal__actions {
  margin-top: 4rem;
}
</style>
<% partial_dir = "/decidim/spam_signal/admin/spam_filter_reports" %>

<div class="content spam_signal__section">
  <div class="card">
    <h2 class="card-title card-divider">
      <%= t(".headings.title") %>
    </h2>
    <div class="card-content card-section">
      The spam filter is an automatic process that is active in the following situations: 
      <ol>
        <li>When a user tries to save his account or write a comment</li>
        <li>Every day, on the whole database</li>
      </ol>

      The spam filter will do the following action: 
      <ul>
        <li>Check if the user's content is a detected as a spam</li>
        <li>Quarantine: Block the user and hide it's content</li>
        <li>Ban: Remove the user and all his data</li>
      </ul>

      <strong>RGPD</strong><br />
      Please be sure your <a href="/terms-and-conditions">Terms and Conditions</a> are transparent over this
      process, to be compliant with the European regulations. Users should be noticed on the the conditions that their
      account and data may be deleted if the Automatic Spam Filter detects suspicious activities.
    </div>
  </div>
</div>

<div class="content spam_signal__section">
  <div class="grid-x grid-margin-x">
    <div class="cell small-12 medium-6">
      <h2><%= t(".headings.spam_flow") %></h2>
      <%= decidim_form_for(@form_configuration, url: config_path(@form_configuration.id), method: :patch, html: {class: "callout", id: "ConfigurationForm"}) do |f| %>
        <%= render partial: "#{partial_dir}/form",
                   locals: { form: f} %>
        <div class="form-actions spam_signal__actions">
          <%= f.submit t(".actions.save") %>
          <button class="button hollow" type="reset"><%= t(".actions.cancel")%></button>
        </div>
      <% end %>
    </div>

    <%= render partial: "#{partial_dir}/metrics",
              locals: { quarantine: quarantine} %>

    <%= render partial: "#{partial_dir}/settings_forms",
               locals: { scanner_forms: @scanner_forms, cop_forms: @cop_forms} %>
  </div>
  <% if quarantine.count > 0 %>
    <div class="grid-x grid-margin-x spam_signal__section" id="review-quarantine">
      <%= render partial: "#{partial_dir}/quarantine_list",
                locals: { quarantine: quarantine} %>
    </div>
  <% end %>
</div>